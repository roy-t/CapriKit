<Project>

    <Target Name="ReadVersion" BeforeTargets="BeforeCompile">        
        <ReadLinesFromFile
            File="$(MSBuildThisFileDirectory)version.txt" >
            <Output
                TaskParameter="Lines"
                ItemName="ExternalVersion"/>
        </ReadLinesFromFile>
        <Message Importance="High" Text="Using version @(ExternalVersion) from $(MSBuildThisFileDirectory)version.txt" />
        <Message Importance="High" Text="BLA BLA @(ExternalVersion->'%(Identity)') " />
    </Target>
  
  <!-- Build settings -->   
  <PropertyGroup> 
    <TargetFramework>net9.0</TargetFramework>
    <LangVersion>Latest</LangVersion>
    <Platforms>x64</Platforms>
    <AllowUnsafeBlocks>true</AllowUnsafeBlocks>
    <ImplicitUsings>enable</ImplicitUsings>
    <Nullable>enable</Nullable>
    <WarningsAsErrors>nullable</WarningsAsErrors>
  </PropertyGroup>    

  <!-- Versioning-->
  <PropertyGroup>
    <FlatVersion>@(ExternalVersion->'%(Identity)')</FlatVersion>
    <!--<ExternalVersion>$([System.IO.File]::ReadAllText("version.txt"))</ExternalVersion>-->
    <!--<AssemblyVersion>"@(ExternalVersion)"</AssemblyVersion>-->
    <Version>$(FlatVersion)</Version>
    <!--<FileVersion>"@(ExternalVersion)"</FileVersion>-->
  </PropertyGroup>
    <!-- Documentation -->
  <PropertyGroup>
    <GenerateDocumentationFile>true</GenerateDocumentationFile>
    <NoWarn>1591</NoWarn>
  </PropertyGroup>
    
  <!-- Outputsettings -->   
  <PropertyGroup>    
    <MSBuildProjectExtensionsPath>$(MSBuildProjectDirectory)/../../.build/ext/$(MSBuildProjectName)</MSBuildProjectExtensionsPath>
    <IntermediateOutputPath>$(MSBuildProjectDirectory)/../../.build/obj/$(MSBuildProjectName)</IntermediateOutputPath>
    <AppendTargetFrameworkToOutputPath>false</AppendTargetFrameworkToOutputPath>
    <AppendRuntimeIdentifierToOutputPath>false</AppendRuntimeIdentifierToOutputPath>
    <OutputPath>$(MSBuildProjectDirectory)/../../.build/bin/$(MSBuildProjectName)</OutputPath>
  </PropertyGroup>


</Project>
